/*! generator - v0.5.0 - 2016-12-21*/
var generator={accept:{object:["object","button","div","section","ul","li","list","nav","form","radio","select","checkbox","footer","header","textarea"],component:["box","banner","gutter","card","gallery","hero"],widget:["clock"],extensions:[]},component:{banner:{parent:"<section {{core.id}} {{gen.id}} {{gen.type}} {{core.class}}>{{@inject:[%each.child%]}</section>",child:"<div {{gen.id}} {{gen.type}} {{core.class}}>{{object.child.content}}</div>"},gutter:"",card:"",badge:""},config:{extensions:{src:{root:"data/extensions/index.json",exists:!1},enable:!0},helpers:{scope:"global",extend:!1},scripts:{root:"lib/src/",extension:{format:"js",append:!0},onload:!1,cache:!0},storage:{allow:!0,type:"local",persist:!0,flush:"function",prefix:"GEN-"}},core:{},extensions:{},nomenclature:{generator:'generator-id="{{type}}-{{unit}}"',template:"generator.template",component:"generator.component",widget:"generator.widget",extension:"generator.extension",data:"generator.data"},plugins:[{translator:{activate:!0,observe:"tr",languages:["en_EN","fr_FR"],root:"plugins/translator/",format:"json"}}],template:{form:{button:"<button {{core.id}} {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}} {{gen.style}}>{{object.parent.content}}</button>",checkbox:'<label for="{{object.parent.id}}"><input {{core.id}} type="checkbox" {{gen.id}} {{gen.type}} {{core.class}} {{object.parent.disabled}} {{core.attributes}}>{{object.parent.content}}</label>',radiobutton:'<input type="radiobutton" {{gen.id}} {{core.class}} {{core.attributes}}>',input:'<input type="text" {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}} />',textarea:"<textarea {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}}>{{object.parent.content}}</textarea>",select:{parent:"<select {{gen.id}} {{gen.type}} {{core.class}} {{object.parent.disabled}} {{core.attributes}} {{gen.style}}>{{@inject:[%each.child%]}</select>",child:"<option {{gen.id}} {{gen.type}} {{core.value}} {{core.class}}>{{object.child.content}}</option>"}},layout:{header:"<header {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}}>{{@include:layout.nav}}</header>",footer:"<footer {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}}></footer>",nav:"<nav {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}}></nav>",list:{parent:"<ul {{gen.id}} {{gen.type}} {{core.class}} {{core.attributes}} {{gen.style}}>{{@inject:[%each.child%]}</ul>",child:"<li {{gen.id}} {{gen.type}} {{core.class}}>{{object.child.content}}</li>"}}},ajax:{dataHolder:{},logData:function(){console.log(ajax.dataHolder)},chunk:{status:{},dataHolder:{},set:function(a,b){a=null==a?ajax.dataHolder:a,Object.defineProperty(Array.prototype,"chunk_size",{value:function(a){var b=this;return[].concat.apply([],b.map(function(c,d){return d%a?[]:[b.slice(d,d+a)]}))},configurable:!0});var c="object"==typeof a?a:JSON.parse(a),d=c.core,e=[];for(var f in d)e.push(d[f]);var g=e.chunk_size(b),h=0;$.each(g,function(a,b){ajax.chunk.dataHolder[a]=b,h++}),ajax.chunk.status.available=!0,ajax.chunk.status["chunk count"]=h},get:function(a,b){var c=ajax.chunk.status.available;a=a||0,b=b||0;var d=[];if(void 0!==c&&c===!0){if(0!==b&&void 0!==b)for(var e=a;e<b;e++)void 0!==ajax.chunk.dataHolder[e]&&d.push(ajax.chunk.dataHolder[e]);else for(var f in ajax.chunk.dataHolder)void 0!==ajax.chunk.dataHolder[f]&&d.push(ajax.chunk.dataHolder[f]);return d}new errors.alert("Object Unavailable","The object you are trying to access does not exist. Run the chunk.set function",!0,"ajax.chunk.get")}},process:{load:function(a){function b(b){var c=JSON.stringify(b),d=a.parse||!1;if(""!==a.remove&&void 0!==a.remove&&null!==a.remove)if("object"==typeof a.remove)for(var e in a.remove){var f=new RegExp(a.remove[e],"g");c=c.replace(f,"")}else"object"!=typeof a.remove&&(f=new RegExp(a.remove,"g"),c=c.replace(f,""));1==d?ajax.dataHolder=JSON.parse(c):ajax.dataHolder=c}$.ajax({url:a.path,success:function(a){ajax.dataHolder=a},error:function(){errors.alert("JSON Error","Unable to load JSON. Check your path parameters",!0,"ajax.process.load")}}).done(function(){b(ajax.dataHolder)}).done(function(){1==a.chunk&&ajax.chunk.set(null,5)})},save:function(a){function b(){$.each(a,function(a,b){d[a]=b})}function c(a){$.ajax({url:a.url,type:a.type||"POST",headers:a.headers,data:a.data,timeout:a.timeout||null,dataType:a.dataType||"json",contentType:a.contentType,password:a.password,statusCode:{404:function(){errors.alert("AJAX Save Error","The server responded with a 404 (page not found) error. Data has not been saved",!0,"ajax.process.save[executeSave]")},500:function(){errors.alert("AJAX Save Error","The server responded with a 500 (server error) code. Data has not been saved",!0,"ajax.process.save[executeSave]")}},success:function(){},error:function(){errors.alert("AJAX Save Error","The server responded with an error. Data has not been saved",!0,"ajax.process.save[executeSave]")}})}var d={};void 0!==a?"object"==typeof a?$.when(b()).done(function(){c(d)}):errors.alert("Type Mismatch","Function was expecting an object",!0,"ajax.process.save"):errors.alert("AJAX Save Error","Required arguments have not been provided",!0,"ajax.process.save")}}},listener:{mutate:function(a){var b=document.querySelectorAll(a.target),c=new MutationObserver(function(b){b.forEach(function(b){var c=b.addedNodes;if(null!==c){var d=$(c);d.each(function(){var b=$(this);b.hasClass(a.class)&&console.log(a.class+" mutation has been observed")})}})});c.observe(b,a.config),void 0!==a.delay&&null!==a.delay&&window.setTimeout(function(){c.disconnect()},a.delay)},init:function(args){if("object"==typeof args)if(Array.isArray(args)===!0)for(var a in args)console.log(args[a]),$(args[a].element).on(args[a].event,function(){eval(args[a].function),void 0!==args[a].timer&&null!==args[a].timer&&window.setTimeout(function(){generator.listener.kill({event:args[a].event,element:args[a].element})},args[a].timer)});else $(args.element).on(args.event,function(){eval(args.function)}),void 0!==args.timer&&null!==args.timer&&window.setTimeout(function(){generator.listener.kill({event:args.event,element:args.element})},args.timer)},kill:function(a){if("object"==typeof a)if(Array.isArray(a)===!0)for(var b in a)void 0!==a[b].timer&&null!==a[b].timer?window.setTimeout(function(){$(a[b].element).off(a[b].event)},a[b].timer):$(a[b].element).off(a[b].event);else void 0!==a.timer&&null!==a.timer?window.setTimeout(function(){$(a.element).off(a.event),console.warn(a.event+" event killed")},a.timer):($(a.element).off(a.event),console.warn(a.event+" event killed"))}},dialogs:{config:{animate:{activate:!0,delay:500},position:"front",parent:"body"},alert:function(a){},confirm:function(a){helpers.removeDomObjects(["gen_modal","gen_confirm"]);var b=void 0!==a.animate?a.animate:this.config.animate.activate,c=["yes","no"],d=[];if("object"==typeof a&&void 0!==a.type&&"alert"===a.type){var e=a.title,f=a.message,g=a.buttons,h='<div class="gen_confirm overlay" style="opacity:0"><div class="gen_confirm inner"><div class="gen_confirm title">{{confirm.title}}</div><div class="gen_confirm message">{{confirm.message}}</div><div class="gen_confirm buttons">{{confirm.buttons}}</div></div></div>';h=h.replace("{{confirm.title}}",e).replace("{{confirm.message}}",f).replace("{{confirm.buttons}}",helpers.buildButtons(g,c,d)),$(this.config.parent).prepend(h),b===!0?$(".gen_confirm").animate({opacity:1},this.config.animate.delay):$(".gen_confirm").attr("style","")}},modal:function(a){helpers.removeDomObjects(["gen_modal","gen_confirm"]);var b=void 0!==a.animate?a.animate:this.config.animate.activate,c=["close"],d=["yes","no"];if("object"==typeof a&&void 0!==a.type&&"modal"===a.type){var e=a.title,f=a.message,g=a.buttons,h='<div class="gen_modal overlay" style="opacity:0"><div class="gen_modal inner"><div class="gen_modal title">{{modal.title}}</div><div class="gen_modal message">{{modal.message}}</div><div class="gen_modal buttons">{{modal.buttons}}</div></div></div>';h=h.replace("{{modal.title}}",e).replace("{{modal.message}}",f).replace("{{modal.buttons}}",helpers.buildButtons(g,c,d)),$(this.config.parent).prepend(h).on("click",'button[data-action="close"]',function(){helpers.removeDomObjects("gen_modal")}),b===!0?$(".gen_modal").animate({opacity:1},this.config.animate.delay):$(".gen_modal").attr("style","")}}},helpers:{adoptChidren:function(a,b){"object"==typeof b&&$.each(b,function(b,c){$(a).append(c)})},checkObjectType:function(a){return 0!==$(a).length?a:0!==$("."+a).length?"."+a:0!==$("#"+a).length?"#"+a:void 0},removeDomObjects:function(a){var b=["body","html","head"];if(Array.isArray(a)===!0)for(var c in a){var d=this.checkObjectType(a[c]);$.inArray(a[c],b)>-1?console.log("that item can not be removed"):$(d).remove()}else d=this.checkObjectType(a),$.inArray(a,b)>-1?console.log("that item can not be removed"):$(d).remove()},buildButtons:function(a,b,c){var d="",e='<div class="button">{{gen.button}}</div>';if("object"==typeof a){for(var f in a)if("close"!==f&&$.inArray(f,c)>-1){var g='<button type="'+f+'" data-action="'+a[f].action+'">'+a[f].label+"</button>";d+=e.replace("{{gen.button}}",g)}else"close"===f&&$.inArray(f,b)>-1&&(g='<button type="'+f+'" data-action="close">'+a[f].label+"</button>",d+=e.replace("{{gen.button}}",g));return d}errors.alert("Type Mismatch","The function was expecting an object but did not receive one",!1,"buildButtons")},delayExecution:function(a){window.setTimeout(a.callback(),a.delay)},destroyEventHandlers:function(a){$(a.object).unbind(a.event)},executeFunctionByName:function(a,b){for(var c=[].slice.call(arguments).splice(2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)},getTemplate:function(item,type){switch(type){case"object":var _string=generator.nomenclature.template;break;case"component":_string=generator.nomenclature.component;break;case"widget":_string=generator.nomenclature.widget}if(item.indexOf(".")>-1){item=item.split(".");for(var i in item)_string+="."+item[i]}else _string+="."+item;if(void 0!==eval(_string))return eval(_string)},makeGeneratorID:function(a,b){var c=generator.nomenclature.generator;return c.replace("{{type}}",a).replace("{{unit}}",b)},makeObjectClass:function(a){var b="";if(null!==a&&void 0!==a&&""!==a)if("object"==typeof a)for(var c in a)b+=a[c]+" ";else b=a;return'class="'+b.trim()+'"'},makeObjectID:function(a){return null!==a&&void 0!==a&&""!==a?'id="'+a+'"':""},makeObjectValue:function(a){return null!==a&&void 0!==a&&""!==a?'value="'+a+'"':""},makeObjectType:function(a){return null!==a&&void 0!==a&&""!==a?'generator-type="'+a+'"':""},makeAttributes:function(a){var b="";return"object"==typeof a?$.each(a,function(a,c){""!==c&&void 0!==c&&null!==c&&(b+=a+'="'+c+'" ')}):b=a,b},makeInlineStyle:function(a,b){var c='<style type="text/css">\n';if("object"==typeof a){c+="#"+b+"{\n";for(var d in a)"type"!==d&&"url"!==d&&(c+=d+":"+a[d]+";\n");c+="}\n",c+="</style>"}$(c).appendTo("head")},makeEventHandlers:function(key,id,val){$("body").on(key,"["+id+"]",function(){eval(val)})},switchParent:function(a,b){var c=$(a).detach();$(b).append(c)}},index:{schema:{},build:function(a){$.each($("[generator-id]"),function(){generator.index.schema[$(this).attr("generator-id")]=$(this).attr("generator-type")})}},build:function(a){function b(a){$("<link/>",{rel:"stylesheet",href:a}).appendTo("head")}if("object"==typeof a){var c=generator.core=a.core;for(var d in c){var e="";if("object"==typeof generator.accept){var f=[];for(var g in generator.accept)f=f.concat(generator.accept[g])}else f=generator.accept;if("component"==c[d].type)var h=c[d].template;else h=c[d].type;var i=$.inArray(h,f),j=helpers.makeGeneratorID(c[d].type,d),k=helpers.makeAttributes(c[d].attributes);if(null!==c[d].template&&void 0!==c[d].template){if(""!==c[d].style&&void 0!==c[d].style&&"object"==typeof c[d].style){var l="";$.each(c[d].style,function(a,e){"type"==a&&"file"==e?new b(c[d].style.url):"type"==a&&"inline"==e?helpers.makeInlineStyle(c[d].style,c[d].id):l+=a+":"+e+";"})}if("object"==typeof helpers.getTemplate(c[d].template,c[d].type))if("object"!=typeof c[d].options)new errors.alert("Mismatch","The options value in the json is not an object",!0,"build");else{var m="",n="",o=helpers.getTemplate(c[d].template,c[d].type);$.each(o,function(a,b){"parent"==a?m=b:"child"==a&&(n=b)});var p="";for(var q in c[d].options)p+=n.replace("{{core.class}}",null!==c[d].options[q].class?helpers.makeObjectClass(c[d].options[q].class):""),p=p.replace(/{{gen.id}}/g,helpers.makeGeneratorID(c[d].type,d+"-"+q+"-child")),p=p.replace("{{object.child.content}}",c[d].options[q].item),p=p.replace("{{core.value}}",helpers.makeObjectValue(c[d].options[q].value)),p=p.replace("{{gen.type}}",helpers.makeObjectType(c[d].type+"."+c[d].template+".sub"));var r=m.replace("{{@inject:[%each.child%]}",p);r=r.replace("{{core.id}}",null!==c[d].id?helpers.makeObjectID(c[d].id):""),r=r.replace("{{core.class}}",null!==c[d].class?helpers.makeObjectClass(c[d].class):""),r=r.replace("{{core.attributes}}",k),r=r.replace("{{gen.type}}",helpers.makeObjectType(c[d].type+"."+c[d].template)),r=r.replace(/{{gen.id}}/g,helpers.makeGeneratorID(c[d].type,d)),r=""!==c[d].disabled&&void 0!==c[d].disabled&&c[d].disabled===!0?r.replace("{{object.parent.disabled}}","disabled"):r.replace(" {{object.parent.disabled}}",""),r=""!==l&&void 0!==l?r.replace("{{gen.style}}",'style="'+l+'"'):r.replace("{{gen.style}}",""),e+=r}else{var s=helpers.getTemplate(c[d].template,c[d].type);if(s=s.replace("{{object.parent.content}}",c[d].content),s=s.replace(/{{gen.id}}/g,j),s=s.replace("{{gen.type}}",helpers.makeObjectType(c[d].type+"."+c[d].template)),s=s.replace("{{core.attributes}}",k),s=s.replace(/{{object.parent.id}}/g,c[d].id),s=s.replace("{{core.id}}",null!==c[d].id?helpers.makeObjectID(c[d].id):""),s=s.replace("{{core.class}}",null!==c[d].class?helpers.makeObjectClass(c[d].class):""),s=""!==c[d].disabled&&void 0!==c[d].disabled&&c[d].disabled===!0?s.replace("{{object.parent.disabled}}","disabled"):s.replace(" {{object.parent.disabled}}",""),s=""!==l&&void 0!==l?s.replace("{{gen.style}}",'style="'+l+'"'):s.replace("{{gen.style}}",""),s.indexOf("@include")>-1){var t=s.split("@include:")[1].split("}}")[0],u=t.split(".")[1],v=helpers.getTemplate(t),w="{{@include:"+t+"}}";for(a in generator.core)generator.core[a].type==u&&(v=v.replace(/{{object.parent.id}}/g,generator.core[a].id),v=v.replace(/{{gen.id}}/g,helpers.makeGeneratorID(generator.core[a].type,a)));s=s.replace(w,v)}e+=s}}else e+="<"+c[d].type+" "+j,e+=""!==c[d].class&&void 0!==c[d].class?helpers.makeObjectClass(c[d].class):"",e+=""!==c[d].id&&void 0!==c[d].id?' id="'+c[d].id+'"':"",e+=""!==c[d].disabled&&void 0!==c[d].disabled&&c[d].disabled===!0?" disabled":"",""!==c[d].attributes&&void 0!==c[d].attributes&&"object"==typeof c[d].attributes&&$.each(c[d].attributes,function(a,b){""!==c[d].attributes[a]&&void 0!==c[d].attributes[a]&&(e+=" "+a+"="+b)}),""!==c[d].style&&void 0!==c[d].style&&"object"==typeof c[d].style&&(l="",$.each(c[d].style,function(a,b){l+=a+":"+b+";"}),e+=' style="'+l+'"'),e+=">",e+=c[d].content,e+="</"+c[d].type+">";i>-1&&($(c[d].parent).append(e),$.each(c[d].events,function(a,b){helpers.makeEventHandlers(a,j,b)}))}}},extend:function(a){try{if(Array.isArray(a)===!0)for(var b in a){var c=a[b];if("object"==typeof a){var d="",e={};for(var f in c)c.hasOwnProperty(f)&&(d+="identifier"===f?c[f]:"","parent"==f&&(e[f]=c[f]),"child"==f&&(e[f]=c[f]),"code"==f&&(e=c[f]));void 0!==generator.extensions[d]&&""!==generator.extensions[d]?window.alert("The extension "+d.toUpperCase()+" has already been registered"):(generator.accept.extensions.push(d),generator.extensions[d]=e)}else new errors.alert("Type mismatch","An object was expected",!0,"extend")}else if("object"==typeof a){d="",e={};for(var g in a)a.hasOwnProperty(g)&&(d+="identifier"===g?a[g]:"","parent"==g&&(e[g]=a[g]),"child"==g&&(e[g]=a[g]),"code"==g&&(e=a[g]));void 0!==generator.extensions[d]&&""!==generator.extensions[d]?window.alert("The extension "+d.toUpperCase()+" has already been registered"):(generator.accept.extensions.push(d),generator.extensions[d]=e)}else new errors.alert("Type mismatch","An object was expected",!0,"extend")}catch(a){}},storage:{supported:function(){return"undefined"!=typeof Storage},load:function(a){if(this.supported()===!0){var b=a.prefix===!0?generator.config.storage.prefix+a.id:a.id;return localStorage.getItem(b)}},save:function(a){if(this.supported()===!0){var b=a.prefix===!0?generator.config.storage.prefix+a.id:a.id;localStorage.setItem(b,a.data)}},purge:function(a){if(this.supported()===!0){var b=a.prefix===!0?generator.config.storage.prefix+a.id:a.id;localStorage.removeItem(b)}}},scripts:{load:function(a,b,c){var d=b||generator.config.scripts.root,e=c||generator.config.scripts.extension.format,f=generator.config.scripts.extension.append,g=Array.isArray(a);if(g===!0)for(var h in a)var i=a[h];else i=a;"object"==typeof i&&$.each(a,function(b){var c=a[b].functions,g=d+a[b].url;g+=f===!0?"."+e:"",$.getScript(g).done(function(){if(Array.isArray(c)===!0)for(var a in c)helpers.executeFunctionByName(c[a].call,window,c[a].params);else helpers.executeFunctionByName(c.call,window,c.params)}).fail(function(){console.log("Unable to load "+g)})})}},init:{rules:{},core:function(a,b,c){$.when(generator.init.plugins(c),generator.init.extensions(b)).done(function(){"object"==typeof a?generator.build(a):$.ajax({url:a,method:"GET",dataType:"json",success:function(a){generator.build(a)},error:function(a){console.log("The following error occured "+a)}})}),$.when(this).done(function(){})},extensions:function(a){a!==!1&&(""!==a&&void 0!==a||(a=generator.config.extensions.src.root),""!==a&&null!==a&&void 0!==a&&$.ajax({url:a,success:function(a){extend(a)},error:function(){extend(a)}}))},plugins:function(a){var b=Array.isArray(a);a=b===!0&&1==a.length?a[0]:a;var c={};if(b===!0)for(var d in a)c[a[d].plugin]=a[d];else c=a;var e=generator.plugins;for(var f in e)$.each(e[f],function(b,c){if(void 0!==c.root){var d=c.root;$.getScript(d+"plugin.js?p="+b).done(function(){helpers.executeFunctionByName(b+".setup",window,[c,a])}).fail(function(){console.log("Unable to load "+b)})}})}},errors:{log:[],alert:function(a,b,c,d){return c===!0?errors.report(a,b,d):"",console.warn(a+" : "+b),a+" : "+b},report:function(a,b,c){var d=new Date;this.log.push({date:d,title:a,error:b,caller:c})}}}||{},$g=ge=generator,ajax=generator.ajax,load=generator.ajax.process.load,save=generator.ajax.process.save,dialogs=generator.dialogs,errors=generator.errors,extend=generator.extend,helpers=generator.helpers,run=generator.init,storage=generator.storage,scripts=generator.scripts;new generator.init.core("data/demo.json",!1,[{plugin:"translator",params:["fr_FR",1e3]}]);